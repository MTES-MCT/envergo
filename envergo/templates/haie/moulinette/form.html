{% load utils %}

{% include 'haie/moulinette/_form_header.html' %}

<form class="fr-mb-3w"
      method="post"
      novalidate
      autocomplete="off"
      action="{% url 'moulinette_result' %}{% if request.GET %}?{{ request.GET.urlencode }}{% endif %}"
      id="moulinette-form">
  {% csrf_token %}

  {% include '_form_header.html' with form=form %}

  <!-- Include current query parameters as hidden fields to keep Triage inputs -->
  {% for key, value in request.GET.items %}<input type="hidden" name="{{ key }}" value="{{ value }}" />{% endfor %}

  <!-- TODO remove: temporary fix waiting for ticket GUHv1.3 -->
  <input type="hidden" name="department" value="36" />
  <input type="hidden" name="element" value="haie" />
  <input type="hidden" name="travaux" value="arrachage" />

  <div class="form-section">
    {% include '_radio_snippet.html' with field=form.profil %}
    {% include '_radio_snippet.html' with field=form.motif %}
    {% include '_radio_snippet.html' with field=form.reimplantation %}
  </div>

  {% include 'haie/moulinette/_form_footer.html' %}
</form>
