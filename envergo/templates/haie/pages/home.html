{% extends 'haie/base.html' %}

{% load static l10n moulinette %}

{% block title %}
  Le point d'accÃ¨s unique Ã  la rÃ©glementation et aux dÃ©marches administratives sur les haies
{% endblock %}

{% block main-classes %}home{% endblock %}

{% block container %}

  <section id="hero">
    <div class="fr-container">

      {% comment %}
    The main hero section illustration moves up and down the document depending on the screen width.

    Since a full css solution was getting really hackish and complicated, it's just much easier and cleaner to use three different img elements, and hide or display them using media queries.
      {% endcomment %}

      <div class="home-illustration fr-hidden fr-unhidden-lg">
        <img src="{% static 'images/haie_form.svg' %}" alt="" class="light-only">
        <img src="{% static 'images/haie_form_dark.svg' %}"
             alt=""
             class="dark-only">
      </div>

      <h1>Le point d'accÃ¨s unique Ã  la rÃ©glementation et aux dÃ©marches administratives sur les haies</h1>

      <div class="home-illustration fr-hidden fr-unhidden-md fr-hidden-lg fr-hidden fr-unhidden-md fr-hidden-lg">
        <img src="{% static 'images/haie_form.svg' %}" alt="" class="light-only">
        <img src="{% static 'images/haie_form_dark.svg' %}"
             alt=""
             class="dark-only">
      </div>

      <ul class="fr-badge-group fr-my-3w">
        <li>
          <p class="fr-badge fr-badge--blue-ecume">ğŸ¦Â DÃ©rogation espÃ¨ces protÃ©gÃ©es</p>
        </li>
        <li>
          <p class="fr-badge fr-badge--blue-ecume">ğŸšœÂ ConditionnalitÃ© PAC</p>
        </li>
      </ul>
      <p class="fr-text--lead">
        Le portail de l'administration qui simplifie pour tous les usagers l'information rÃ©glementaire encadrant les travaux sur haies, et permet le dÃ©pÃ´t unique des demandes d'autorisation â€” <i>En construction</i>.
      </p>
      <a href="#simulateur"
         class="fr-btn fr-btn--lg fr-btn--icon-right fr-icon-arrow-down-line fr-mb-1w"
         data-event-category="HomePage"
         data-event-action="SimulationClick"
         data-event-name="Main">Simuler un projet</a>
      <br />
      <span>Accessible sans crÃ©er de compte</span>

      <div class="home-illustration fr-hidden-md fr-mt-3w fr-hidden-md fr-mt-3w">
        <img src="{% static 'images/haie_form.svg' %}" alt="" class="light-only">
        <img src="{% static 'images/haie_form_dark.svg' %}"
             alt=""
             class="dark-only">
      </div>
    </div>
  </section>

  <section id="simulateur" class="fr-py-8w fr-mb-5w">
    <div class="fr-container">
      <h3>Simuler un projet</h3>
      <p>
        Vous envisagez des travaux sur vos haiesÂ ? Nous vous informons sur les rÃ¨gles de protection et les procÃ©dures Ã 
        suivre.
        <br />
        <span class="fr-text fr-text--sm">3 minutes, gratuit et anonyme</span>
      </p>
      <div class="fr-grid-row">
        {% for department in activated_departments %}
          <div class="fr-col-12 fr-col-sm-6 fr-col-lg-4 fr-mb-2w">
            <div class="fr-tile fr-tile--sm fr-tile--horizontal fr-enlarge-link fr-mr-2w">
              <div class="fr-tile__body">
                <div class="fr-tile__content">
                  <h3 class="fr-tile__title">
                    <a href="{% url 'triage' %}?department={{ department.department }}">{{ department }}</a>
                  </h3>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
      <hr id="department-search" class="separator fr-mt-4w" />
      <div class="fr-grid-row fr-grid-row--center">
        <span id="department-search-title" class="fr-text--lead">Le projet est situÃ© dans un autre dÃ©partementÂ ?</span>
        <div class="fr-col-12 fr-grid-row fr-grid-row--center">
          <form action="#department-search" method="post">
            {% csrf_token %}
            <div class="fr-search-bar" role="search">
              <label class="fr-label" for="department">Department</label>

              <select class="fr-input"  name="department" id="department">
                <option value="">--- Choisir un dÃ©partement ---</option>
                {% for option in departments %}
                  <option value="{{ option.id }}"
                          {% if option.id == department.id %}selected{% endif %}>{{ option }}</option>
                {% endfor %}
              </select>
              <button type="submit" class="fr-btn">Rechercher</button>
            </div>
          </form>
        </div>
      </div>
      {% if department and config and config.department_guichet_unique_url %}
        <p class="fr-mt-4w">Un guichet de la haie existe dÃ©jÃ  pour le dÃ©partement {{ department }}.</p>
        <p>
          <a class="fr-btn"
             href="{{ config.department_guichet_unique_url }}"
             target="_blank">Aller au Guichet unique Haie pour ce
          dÃ©partement</a>
        </p>
      {% elif department %}
        <div class="fr-notice fr-notice--warning fr-mt-4w">
          <div class="fr-container">
            <div class="fr-notice__body">
              <p>
                <span class="fr-notice__title"></span>
                <span class="fr-notice__desc">Le guichet unique haie n'existe pas dans le department {{ department }}.</span>
              </p>
            </div>
          </div>
        </div>
        {% if config and config.contacts_and_links %}
          <div id="contacts_and_links" class="fr-mt-4w fr-p-2w">
            <h6>Liste des contacts et liens utiles</h6>
            {{ config.contacts_and_links|safe }}
          </div>
        {% endif %}
      {% endif %}
    </div>
  </section>

  <section id="quand-demander" class="fr-mb-5w">
    <div class="fr-container">
      <div class="fr-grid-row fr-grid-row--center">
        <div class="fr-col fr-col-lg-8 fr-col-xl-6 alt fr-p-3w">

          <h2 class="fr-h6">Quels types de projets ce simulateur couvre-t-il actuellementÂ ?</h2>
          <hr>
          <p>
            <strong>VÃ©gÃ©tation concernÃ©e</strong>
            <br />
            <span class="green-check">âœ”</span>Â Une haie
            <br />
            âŒÂ Un bosquet
            <br />
            âŒÂ Un alignement dâ€™arbres
            <br />
          </p>
          <p>
            <strong>Nature du projet</strong>
            <br />
            <span class="green-check">âœ”</span>Â Un arrachage
            <br />
            âŒÂ Un entretien
            <br />
          </p>
          <p>
            <strong>Localisation</strong>
            <br />
            Simulateur uniquement en expÃ©rimentation dans quelques departements
          </p>
        </div>
      </div>
    </div>
  </section>
{% endblock %}

{% block extra_js %}
  <script defer src="{% static 'js/libs/data_event_attributes_analytics.js' %}"></script>
{% endblock %}
