# Generated by Django 3.2.12 on 2022-04-19 08:56

from django.db import migrations

RESULTS = {
    1: "soumis",
    2: "non_soumis",
    3: "action_requise",
    4: "non_disponible",
}


CRITERION_RESULTS = {
    1: "soumis",
    2: "non_soumis",
    3: "action_requise",
}


def copy_result_fields(apps, schema_editor):

    Evaluation = apps.get_model('evaluations', 'Evaluation')
    for evaluation in Evaluation.objects.filter(result__isnull=False):
        evaluation.result_2 = RESULTS[evaluation.result]
        evaluation.save()

    Criterion = apps.get_model('evaluations', 'Criterion')
    for criterion in Criterion.objects.all():
        criterion.result_2 = CRITERION_RESULTS[criterion.result]
        criterion.save()


class Migration(migrations.Migration):

    dependencies = [
        ('evaluations', '0057_auto_20220419_0856'),
    ]

    operations = [
        migrations.RunPython(copy_result_fields, migrations.RunPython.noop)

    ]
